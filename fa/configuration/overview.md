---
refcn: chapter_02/01_overview
refen: configuration/overview
---
# بررسی پیکربندی

V2Ray همان ساختار پیکربندی را بین طرف سرور و سمت سرویس گیرنده نشان می دهد که در زیر نشان داده شده است. تنظیمات سرور و مشتری در بخش های مختلف متفاوت هستند.

در زیر ساختار سطح بالای پیکربندی است. هر بخش فرمت خاص خود را دارد.

```javascript
{
  "log": {},
  "api": {},
  "dns": {},
  "stats": {},
  "routing": {},
  "policy": {},
  "inbounds": [],
  "outbounds": [],
  "transport": {}
}
```

> `log`: [LogObject](#logobject)

ورودی پیکربندی برای کنترل خروجی های ورودی.

> `api`: [ApiObject](api.md)

API RPC برای کنترل نمونه V2Ray. مشاهده [API پیکربندی](api.md) برای جزئیات بیشتر.

> `dns`: [DnsObject](dns.md)

پیکربندی برای تنظیمات داخلی DNS سرور. اگر این قسمت حذف شود، V2Ray از پیکربندی DNS سیستم شما استفاده خواهد کرد. برای جزئیات، [تنظیمات DNS](dns.md).

> `آمار`: [StatsObject](stats.md)

هنگامی که مشخص شده، داخلی [آمار](stats.md) را فعال کنید.

> `سیاست`: [PolicyObject](policy.md)

تنظیمات برای مجوزها و دیگر راهبردهای امنیتی. برای جزئیات بیشتر، به [سیاست محلی](policy.md).

> `مسیریابی`: [RoutingObject](routing.md)

پیکربندی برای داخلی [مسیریابی](routing.md) استراتژی.

> `inbounds`: \ [ [InboundObject](#inboundobject)\]

آرایه ای از [InboundObject](#inboundobject) به عنوان پیکربندی برای پروکسی های ورودی.

> `خروجی`: \ [ [OutboundObject](#outboundobject)\]

آرایه ای از [OutboundObject](#outboundobject) به عنوان پیکربندی برای پروکسی های خروجی. اولین خروجی در آرایه یکی از اصلیترین آنهاست. این پیش فرض خروجی در تصمیم مسیریابی است.

> `حمل و نقل`: [TransportObject](transport.md)

پیکربندی پروتکل حمل و نقل پایین. برای جزئیات، [پروتکل گزینه های حمل و نقل](transport.md).

## LogObject

```javascript
{
  "access": "/path/to/file",
  "error": "/path/to/file",
  "loglevel": "warning"
}
```

> `دسترسی به`: رشته

مسیر ورود به سیستم اگر خالی نیست، باید یک مسیر فایل قانونی باشد مانند `"/tmp/v2ray/_access.log"`(لینوکس)، یا `"C: \\ Temp \\ v2ray \\ _ access.log"`(ویندوز ) اگر خالی باشد، V2Ray ورود به سیستم را به `stdout`می نویسد.

> `خطا`: رشته

مسیر ورود به خطا اگر خالی نباشد، باید مسیر فایل قانونی باشد. اگر خالی باشد، V2Ray log log را به `stdout`می نویسد.

> `loglevel`: "debug" | "اطلاعات" | "هشدار" | "خطا" | "هیچ یک"

سطح سیاهههای مربوط به نوشته شده است سطوح ورودی مختلف نشان دهنده محتوای مختلف سیاهههای مربوط است. مقدار پیش فرض `"هشدار"`.

سطوح ورودی:

* `"debug"`: اطلاعات فقط برای توسعه دهندگان. همچنین شامل همه `"اطلاعات"` سیاهههای مربوط.
* `"info"`: اطلاعات برای وضعیت فعلی V2Ray. کاربران مجبور نیستند از آن ها مراقبت کنند. همچنین شامل همه `"هشدار"` سیاهههای مربوط.
* `"هشدار"`: چیزی با محیط زیست اشتباه است، معمولا خارج از V2Ray، به عنوان مثال، شکستن شبکه. V2Ray همچنان اجرا می شود، اما کاربران ممکن است برخی از شکست ها را تجربه کنند. همچنین شامل همه `"خطا"` سیاهههای مربوط.
* `"خطا"`: چیزی شدیدا اشتباه است، که V2Ray نمی تواند اجرا شود.
* `"none"`: همه ورود به سیستم غیر فعال هستند.

## InboundObject

InboundObject یک پروکسی ورودی را تعریف می کند. این ارتباطات ورودی به V2Ray را مدیریت می کند. پراکسی های موجود [در اینجا لیست شده است](protocols.md).

```javascript
{
  "port": 1080,
  "listen": "127.0.0.1",
  "protocol": "protocol_name",
  "settings": {},
  "streamSettings": {},
  "tag": "inbound_tag_name",
  "sniffing": {
    "enabled": false,
    "destOverride": ["http", "tls"]
  },
  "allocate": {
    "strategy": "always",
    "refresh": 5,
    "concurrency": 3
  },
}
```

> `پورت`: شماره | "env: متغیر" | رشته

پورت که پروکسی در حال گوش دادن است فرمت های پذیرفته شده عبارتند از:

* صحیح: شماره پورت واقعی.
* متغیر محیطی: شروع با `"env:"`، متغیر env پورت فرمت رشته را مشخص می کند، مانند `"env: PORT"`. V2Ray متغیر را به عنوان رشته رمزگشایی می کند.
* String: یک مقدار رشته عدد، مانند `"1234"`، یا طیف وسیعی از پورتها، مانند `"5-10"` برای 6 پورت در مجموع.

پورت های واقعی برای باز کردن نیز بستگی به `تخصیص` تنظیمات. زیر را ببینید

> `گوش دادن`: آدرس

آدرس برای گوش دادن به مقدار پیش فرض `"0.0.0.0"` برای اتصالات ورودی در تمام رابط های شبکه است. در غیر این صورت، ارزش باید آدرس یک رابط شبکه موجود باشد.

> `پروتکل`: رشته

نام پروتکل ورودی هر فردی را برای مقادیر موجود مشاهده کنید.

> `تنظیمات`: InboundConfigurationObject

تنظیمات خاص پروتکل `InboundConfigurationObject` در هر پروتکل تعریف کنید.

> `streamSettings`: [StreamSettingsObject]

مشاهده [پروتکل گزینه های حمل و نقل](transport.md) برای جزئیات.

> `برچسب`: رشته

برچسب پروکسی ورودی این می تواند برای تصمیم گیری مسیریابی استفاده شود. اگر خالی نباشد، باید در میان تمام پروکسی های ورودی منحصر به فرد باشد.

> `sniffing`: [SniffingObject](#sniffingobject)

پیکربندی محتویات محتوا

> `تخصیص`: [AllocateObject](#allocateobject)

پیکربندی برای تخصیص پورت

### SniffingObject

```javascript
{
  "enabled": false,
  "destOverride": ["http", "tls"]
}
```

> `فعال`: true | نادرست

آیا محتوا را مجذوب میکنید یا نه

> `destOverride`: \ ["http" | "TLS" \]

آرایه ای از نوع محتوا. اگر نوع محتوا از ترافیک ورودی در لیست مشخص شده باشد، مقصد اتصال با مقدار sniffed رونویسی خواهد شد.

### AllocateObject

```javascript
{
  "strategy": "always",
  "refresh": 5,
  "concurrency": 3
}
```

> `استراتژی`: "همیشه" | "تصادفی"

استراتژی تخصیص پورت هنگامی که آن را به `"همیشه"`، تمام پورت در قسمت `پورت` برای شنیدن اختصاص داده می شود. اگر `«تصادفی»` تنظیم شده باشد، V2Ray بر تعداد `همزمان` پورت گوش می دهد و لیست پورت ها هر `بازخوانی` دقیقه رد می شود.

> `تازه کردن`: شماره

تعداد دقیقه برای تازه کردن بنادر گوش دادن. مقدار حداقل `2`. این تنظیم تنها زمانی موثر است که `استراتژی` به `"تصادفی"`.

> `هم زمان`: شماره

تعداد پورت ها برای گوش دادن مقدار حداقل `1`. حداکثر مقدار یک سوم کل محدوده بندر است.

## OutboundObject

OutboundObject یک پروکسی خروجی را برای مدیریت اتصالات خروجی تعریف می کند. پروتکل های موجود ذکر شده [در اینجا](protocols.md).

```javascript
{
  "sendThrough": "0.0.0.0",
  "protocol": "protocol_name",
  "settings": {},
  "tag": "this_outbound_tag_name",
  "streamSettings": {},
  "proxySettings": {
    "tag": "another_outbound_tag_name"
  },
  "mux": {}
}
```

> `طریق`: آدرس

آدرس آی پی برای ارسال ترافیک. مقدار پیش فرض، `"0.0.0.0"` برای انتخاب تصادفی یک IP موجود در میزبان است. در غیر این صورت، ارزش باید یک آدرس IP از رابط های شبکه موجود باشد.

> `پروتکل`: رشته

نام پروتکل این خروجی مشاهده [پروتکل](protocols.md) برای تمام مقادیر موجود.

> `تنظیمات`: OutboundConfigurationObject

تنظیمات خاص پروتکل مشاهده `OutboundConfigurationObject` در هر پروتکل های فردی است.

> `برچسب`: رشته

برچسب این خروجی اگر خالی نباشد، باید در میان تمام خروجی ها منحصر به فرد باشد.

> `streamSettings`: [StreamSettingsObject](transport.md)

تنظیمات حمل و نقل در سطح پایین. [گزینه های پروتکل حمل و نقل را مشاهده کنید.](transport.md).

> `proxySettings`: [ProxySettingsObject](#proxysettingsobject)

پیکربندی برای نمایندگی ترافیک از این خروجی به دیگری. هنگامی که این تنظیم می شود، `جریان تنظیمات` این خروجی بی تاثیر خواهد بود.

> `mux`: [MuxObject](mux.md)

مشاهده کنید [Mux](mux.md) پیکربندی برای جزئیات.

### ProxySettingsObject

```javascript
{
  "tag": "another-outbound-tag"
}
```

> `برچسب`: رشته

وقتی `برچسب` به تگ خروجی دیگر تنظیم می شود، ترافیک خروجی خروجی فعلی به یک مشخص شده منتقل می شود.